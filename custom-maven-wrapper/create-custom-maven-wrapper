#!/bin/bash

current_dir=$PWD
maven_version=3.6.3

if [ -n "$1" ]
then
  cd $1
fi  

echo "Installing Maven wrapper"
mvn -N io.takari:maven:0.7.7:wrapper -Dmaven=$maven_version

echo "Customizing Maven wrapper script by adding a custom 'Wrapper' tag"
grep -q 'scan.tag.Wrapper' mvnw || sed -i '' $'s/^MAVEN_OPTS/&="-Dscan.tag.Wrapper $&"\\\n&/' mvnw

cd $current_dir

exit 0
